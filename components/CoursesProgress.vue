<template>
    <div class="courses-progress-container">
        <div class="courses-progress-header">
            <div class="courses-progress-header-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.1 4.8H7.49999C7.0226 4.8 6.56477 4.98964 6.2272 5.32721C5.88964 5.66477 5.69999 6.12261 5.69999 6.6C5.69999 7.07739 5.88964 7.53523 6.2272 7.87279C6.56477 8.21036 7.0226 8.4 7.49999 8.4H20.1V20.1C20.1 20.3387 20.0052 20.5676 19.8364 20.7364C19.6676 20.9052 19.4387 21 19.2 21H7.49999C6.54521 21 5.62954 20.6207 4.95441 19.9456C4.27928 19.2705 3.89999 18.3548 3.89999 17.4V6.6C3.89999 5.64522 4.27928 4.72955 4.95441 4.05442C5.62954 3.37928 6.54521 3 7.49999 3H19.2C19.4387 3 19.6676 3.09482 19.8364 3.2636C20.0052 3.43239 20.1 3.66131 20.1 3.9V4.8ZM5.69999 17.4C5.69999 17.8774 5.88964 18.3352 6.2272 18.6728C6.56477 19.0104 7.0226 19.2 7.49999 19.2H18.3V10.2H7.49999C6.86804 10.201 6.24705 10.0349 5.69999 9.7185V17.4ZM19.2 7.5H7.49999C7.2613 7.5 7.03238 7.40518 6.8636 7.2364C6.69482 7.06761 6.59999 6.83869 6.59999 6.6C6.59999 6.3613 6.69482 6.13239 6.8636 5.9636C7.03238 5.79482 7.2613 5.7 7.49999 5.7H19.2V7.5Z" fill="#525866"/>
                </svg>
                <p>Courses - Progress</p>
            </div>
            <button v-if="loadCurrentCourse" @click="showCourses" class="details-btn">
                <span>See all</span>
            </button>
        </div>
        <div class="divider"></div>
        <div class="courses-progress-app">
            <div class="courses-progress-track">
                <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M80 40C80 62.0914 62.0914 80 40 80C17.9086 80 0 62.0914 0 40C0 17.9086 17.9086 0 40 0C62.0914 0 80 17.9086 80 40ZM6.4 40C6.4 58.5568 21.4432 73.6 40 73.6C58.5568 73.6 73.6 58.5568 73.6 40C73.6 21.4432 58.5568 6.4 40 6.4C21.4432 6.4 6.4 21.4432 6.4 40Z" fill="#E2E4E9"/>
                <path v-if="loadCurrentCourse" d="M40 0C45.2529 6.26399e-08 50.4543 1.03463 55.3073 3.04482C60.1604 5.05501 64.5699 8.00139 68.2843 11.7157C71.9986 15.4301 74.945 19.8396 76.9552 24.6927C78.9654 29.5457 80 34.7471 80 40H73.6C73.6 35.5876 72.7309 31.2184 71.0424 27.1418C69.3538 23.0653 66.8788 19.3613 63.7588 16.2412C60.6387 13.1212 56.9347 10.6462 52.8582 8.95765C48.7816 7.26909 44.4124 6.4 40 6.4V0Z" fill="#FF4A00"/>
                <path v-if="loadCurrentCourse" d="M26.6327 45V43.8864L30.0781 40.3168C30.4459 39.929 30.7492 39.5893 30.9879 39.2976C31.2298 39.0026 31.4104 38.7225 31.5298 38.4574C31.6491 38.1922 31.7087 37.9105 31.7087 37.6122C31.7087 37.2741 31.6292 36.9825 31.4701 36.7372C31.311 36.4886 31.0939 36.2981 30.8188 36.1655C30.5437 36.0296 30.2338 35.9616 29.8891 35.9616C29.5245 35.9616 29.2064 36.0362 28.9346 36.1854C28.6628 36.3345 28.454 36.545 28.3082 36.8168C28.1623 37.0885 28.0894 37.4067 28.0894 37.7713H26.6228C26.6228 37.1515 26.7653 36.6096 27.0504 36.1456C27.3354 35.6816 27.7265 35.322 28.2236 35.0668C28.7208 34.8082 29.2859 34.679 29.919 34.679C30.5586 34.679 31.1221 34.8066 31.6093 35.0618C32.0998 35.3137 32.4826 35.6584 32.7577 36.0959C33.0328 36.5301 33.1704 37.0206 33.1704 37.5675C33.1704 37.9453 33.0991 38.3149 32.9566 38.6761C32.8174 39.0374 32.5738 39.4401 32.2258 39.8842C31.8778 40.325 31.3939 40.8603 30.7741 41.4901L28.7506 43.608V43.6825H33.3344V45H26.6327ZM38.4955 45.1392C37.8724 45.1392 37.3122 45.0199 36.8151 44.7812C36.3212 44.5393 35.9268 44.2079 35.6318 43.7869C35.3369 43.366 35.1794 42.8854 35.1595 42.3452H36.651C36.6875 42.7827 36.8814 43.1423 37.2327 43.424C37.584 43.7057 38.0049 43.8466 38.4955 43.8466C38.8866 43.8466 39.2329 43.7571 39.5345 43.5781C39.8395 43.3958 40.0781 43.1456 40.2504 42.8274C40.4261 42.5092 40.5139 42.1463 40.5139 41.7386C40.5139 41.3243 40.4244 40.9548 40.2455 40.63C40.0665 40.3052 39.8196 40.05 39.5047 39.8643C39.1932 39.6787 38.8352 39.5843 38.4308 39.581C38.1226 39.581 37.8127 39.634 37.5012 39.7401C37.1896 39.8461 36.9377 39.9853 36.7455 40.1577L35.3385 39.9489L35.9102 34.8182H41.5083V36.1357H37.1879L36.8648 38.9844H36.9244C37.1233 38.7921 37.3868 38.6314 37.7149 38.5021C38.0464 38.3729 38.401 38.3082 38.7789 38.3082C39.3986 38.3082 39.9505 38.4557 40.4344 38.7507C40.9216 39.0457 41.3044 39.4484 41.5828 39.9588C41.8646 40.4659 42.0038 41.0492 42.0004 41.7088C42.0038 42.3684 41.8546 42.9567 41.553 43.4737C41.2547 43.9908 40.8404 44.3984 40.3101 44.6967C39.7831 44.9917 39.1782 45.1392 38.4955 45.1392ZM49.0469 43.0909V42.554C49.0469 42.1695 49.1265 41.8182 49.2856 41.5C49.448 41.1785 49.6833 40.9216 49.9916 40.7294C50.3031 40.5339 50.6793 40.4361 51.1201 40.4361C51.5709 40.4361 51.9487 40.5322 52.2536 40.7244C52.5585 40.9167 52.7889 41.1735 52.9447 41.495C53.1038 41.8165 53.1833 42.1695 53.1833 42.554V43.0909C53.1833 43.4754 53.1038 43.8284 52.9447 44.1499C52.7856 44.468 52.5519 44.7249 52.2437 44.9205C51.9388 45.1127 51.5642 45.2088 51.1201 45.2088C50.6727 45.2088 50.2948 45.1127 49.9866 44.9205C49.6783 44.7249 49.4447 44.468 49.2856 44.1499C49.1265 43.8284 49.0469 43.4754 49.0469 43.0909ZM50.2053 42.554V43.0909C50.2053 43.3759 50.2733 43.6345 50.4092 43.8665C50.5451 44.0985 50.782 44.2145 51.1201 44.2145C51.4549 44.2145 51.6885 44.0985 51.8211 43.8665C51.9537 43.6345 52.02 43.3759 52.02 43.0909V42.554C52.02 42.2689 51.9553 42.0104 51.8261 41.7784C51.7001 41.5464 51.4648 41.4304 51.1201 41.4304C50.7887 41.4304 50.5533 41.5464 50.4141 41.7784C50.2749 42.0104 50.2053 42.2689 50.2053 42.554ZM43.9262 37.2642V36.7273C43.9262 36.3428 44.0058 35.9898 44.1648 35.6683C44.3273 35.3468 44.5626 35.09 44.8708 34.8977C45.1824 34.7055 45.5585 34.6094 45.9994 34.6094C46.4501 34.6094 46.828 34.7055 47.1329 34.8977C47.4378 35.09 47.6682 35.3468 47.8239 35.6683C47.9797 35.9898 48.0576 36.3428 48.0576 36.7273V37.2642C48.0576 37.6487 47.9781 38.0017 47.819 38.3232C47.6632 38.6413 47.4312 38.8982 47.1229 39.0938C46.818 39.286 46.4435 39.3821 45.9994 39.3821C45.5486 39.3821 45.1691 39.286 44.8609 39.0938C44.5559 38.8982 44.3239 38.6413 44.1648 38.3232C44.0058 38.0017 43.9262 37.6487 43.9262 37.2642ZM45.0896 36.7273V37.2642C45.0896 37.5492 45.1559 37.8078 45.2884 38.0398C45.4243 38.2718 45.6613 38.3878 45.9994 38.3878C46.3308 38.3878 46.5628 38.2718 46.6954 38.0398C46.8313 37.8078 46.8992 37.5492 46.8992 37.2642V36.7273C46.8992 36.4422 46.8346 36.1837 46.7053 35.9517C46.5761 35.7197 46.3407 35.6037 45.9994 35.6037C45.6679 35.6037 45.4326 35.7197 45.2934 35.9517C45.1575 36.1837 45.0896 36.4422 45.0896 36.7273ZM44.3985 45L51.3985 34.8182H52.5867L45.5867 45H44.3985Z" fill="#0A0D14"/>
                <path v-else d="M34.2507 45.169C33.4652 45.1657 32.794 44.9586 32.2372 44.5476C31.6804 44.1366 31.2545 43.5384 30.9595 42.7528C30.6645 41.9673 30.5171 41.0211 30.5171 39.9141C30.5171 38.8104 30.6645 37.8674 30.9595 37.0852C31.2578 36.303 31.6854 35.7064 32.2422 35.2955C32.8023 34.8845 33.4718 34.679 34.2507 34.679C35.0296 34.679 35.6975 34.8861 36.2543 35.3004C36.8111 35.7114 37.237 36.308 37.532 37.0902C37.8303 37.8691 37.9794 38.8104 37.9794 39.9141C37.9794 41.0244 37.8319 41.9723 37.5369 42.7578C37.242 43.54 36.8161 44.1383 36.2592 44.5526C35.7024 44.9635 35.0329 45.169 34.2507 45.169ZM34.2507 43.8416C34.9401 43.8416 35.4787 43.5052 35.8665 42.8324C36.2576 42.1596 36.4531 41.1868 36.4531 39.9141C36.4531 39.0689 36.3636 38.3546 36.1847 37.7713C36.009 37.1847 35.7555 36.7405 35.424 36.4389C35.0959 36.134 34.7048 35.9815 34.2507 35.9815C33.5646 35.9815 33.026 36.3196 32.635 36.9957C32.2439 37.6719 32.0466 38.6446 32.0433 39.9141C32.0433 40.7625 32.1312 41.4801 32.3068 42.0668C32.4858 42.6501 32.7394 43.0926 33.0675 43.3942C33.3956 43.6925 33.79 43.8416 34.2507 43.8416ZM44.9737 43.0909V42.554C44.9737 42.1695 45.0533 41.8182 45.2124 41.5C45.3748 41.1785 45.6101 40.9216 45.9183 40.7294C46.2299 40.5339 46.6061 40.4361 47.0469 40.4361C47.4976 40.4361 47.8755 40.5322 48.1804 40.7244C48.4853 40.9167 48.7157 41.1735 48.8714 41.495C49.0305 41.8165 49.1101 42.1695 49.1101 42.554V43.0909C49.1101 43.4754 49.0305 43.8284 48.8714 44.1499C48.7124 44.468 48.4787 44.7249 48.1704 44.9205C47.8655 45.1127 47.491 45.2088 47.0469 45.2088C46.5994 45.2088 46.2216 45.1127 45.9133 44.9205C45.6051 44.7249 45.3714 44.468 45.2124 44.1499C45.0533 43.8284 44.9737 43.4754 44.9737 43.0909ZM46.1321 42.554V43.0909C46.1321 43.3759 46.2 43.6345 46.3359 43.8665C46.4718 44.0985 46.7088 44.2145 47.0469 44.2145C47.3816 44.2145 47.6153 44.0985 47.7479 43.8665C47.8804 43.6345 47.9467 43.3759 47.9467 43.0909V42.554C47.9467 42.2689 47.8821 42.0104 47.7528 41.7784C47.6269 41.5464 47.3916 41.4304 47.0469 41.4304C46.7154 41.4304 46.4801 41.5464 46.3409 41.7784C46.2017 42.0104 46.1321 42.2689 46.1321 42.554ZM39.853 37.2642V36.7273C39.853 36.3428 39.9325 35.9898 40.0916 35.6683C40.254 35.3468 40.4893 35.09 40.7976 34.8977C41.1091 34.7055 41.4853 34.6094 41.9261 34.6094C42.3769 34.6094 42.7547 34.7055 43.0597 34.8977C43.3646 35.09 43.5949 35.3468 43.7507 35.6683C43.9065 35.9898 43.9844 36.3428 43.9844 36.7273V37.2642C43.9844 37.6487 43.9048 38.0017 43.7457 38.3232C43.59 38.6413 43.3579 38.8982 43.0497 39.0938C42.7448 39.286 42.3703 39.3821 41.9261 39.3821C41.4754 39.3821 41.0959 39.286 40.7876 39.0938C40.4827 38.8982 40.2507 38.6413 40.0916 38.3232C39.9325 38.0017 39.853 37.6487 39.853 37.2642ZM41.0163 36.7273V37.2642C41.0163 37.5492 41.0826 37.8078 41.2152 38.0398C41.3511 38.2718 41.5881 38.3878 41.9261 38.3878C42.2576 38.3878 42.4896 38.2718 42.6222 38.0398C42.758 37.8078 42.826 37.5492 42.826 37.2642V36.7273C42.826 36.4422 42.7614 36.1837 42.6321 35.9517C42.5028 35.7197 42.2675 35.6037 41.9261 35.6037C41.5947 35.6037 41.3594 35.7197 41.2202 35.9517C41.0843 36.1837 41.0163 36.4422 41.0163 36.7273ZM40.3253 45L47.3253 34.8182H48.5135L41.5135 45H40.3253Z" fill="#0A0D14"/>
                </svg>
            </div>
            <div class="courses-progress-texts">
                <p>{{ loadCurrentCourse ? currentCourse.title :'No course in progress' }}</p>
                <span>{{ loadCurrentCourse ? currentCourse.subtitle :'No progress in any course yet. Consider subscribing to one.' }}</span>
                <p @click="handleCourses(loadCurrentCourse)">{{ loadCurrentCourse ? 'Resume course' : 'Subscribe' }}</p>
            </div>
        </div>
    </div>
</template>

<script>
import { ref } from 'vue'

export default {
    name: 'CoursesProgress',
    components: {

    },
    props: {
        currentCourse: {
            type: Object,
        },
    },
    setup(props) {
        let loadCurrentCourse = ref(false)

        onMounted(() => {
            props.currentCourse ? loadCurrentCourse.value = true : null
        })

        const handleCourses = (value) => {
            value == true ? console.log('Clicked to resume the course') : console.log('Clicked to subscribe')
        }

        const showCourses = () => {
            console.log('Clicked to see all courses')
        }

        return {
            handleCourses,
            showCourses,
            loadCurrentCourse,
        }
    },
}
</script>

<style lang="scss" scoped>
@use 'assets/scss/main';

.courses-progress-container {
    @include main.small-container();
}

.courses-progress-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 320px;
    margin-top: -.75rem;
    p {
        @include main.text-header();
        color: main.$text-main-900;
    }
    .details-btn {
        @include main.details-button();
    }

    .courses-progress-header-title {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: .5rem;
        p {
            @include main.text-header();
            color: main.$text-main-900;
        }
    }
}

.divider {
    @include main.divider();
}

.courses-progress-app {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    width: 320px;
    gap: 1rem;
    margin-top: .5rem;
    .courses-progress-track {
        display: flex;
        align-items: center;
        justify-content: flex-start;
    }
    .courses-progress-texts {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        text-align: left;
        width: 220px;
        p:first-child {
            @include main.text-main();
            color: main.$text-sub-500;
        }
        span {
            @include main.text-sub();
            color: main.$soft-400;
            margin-top: -.5rem;
        }
        p:last-of-type {
            @include main.text-soft();
            color: main.$color-primary-base;
            text-decoration: underline;
            cursor: pointer;
            margin-top: .5rem;
        }
    }
}

</style>